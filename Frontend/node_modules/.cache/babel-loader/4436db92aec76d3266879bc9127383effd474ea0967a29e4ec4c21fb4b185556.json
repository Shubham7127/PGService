{"ast":null,"code":"import _objectSpread from\"/home/sunbeam/FinalProject/CDAC_PGMANAGEMENT/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/sunbeam/FinalProject/CDAC_PGMANAGEMENT/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useNavigate}from\"react-router\";import{ToastContainer,toast}from\"react-toastify\";import axios from\"axios\";import\"./signin.css\";import{Link}from\"react-router-dom\";import{useLocation}from\"react-router-dom\";import{BASE_URL}from\"../../url\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Signin=function Signin(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var location=useLocation();var navigate=useNavigate();var resetPage=function resetPage(){setEmail('');setPassword('');};var signinPerson=function signinPerson(){if(email.length==0){toast.warning(\"please enter email\");}else if(password.length==0){toast.warning(\"please enter password\");}else{var body={email:email,password:password};// make api call using axios\naxios.post(\"\".concat(BASE_URL,\"/User/signin\"),body).then(function(response){window.sessionStorage.setItem(\"id\",response.data.id);window.sessionStorage.setItem(\"role\",response.data.role);window.sessionStorage.setItem(\"Name\",response.data.fullName);// get the server result\nvar result=response.data;console.log(result);window.sessionStorage.setItem(\"isUserLoggedIn\",true);toast.success(\"Welcome to the PGManagement\");var message='Welcome to PGHouse';if(response.data.role=='ADMIN'){console.log(response.data.role);var newLocation=_objectSpread(_objectSpread({},location),{},{pathname:'/Admin'});var newLocationString=\"\".concat(newLocation.pathname).concat(newLocation.search).concat(newLocation.hash);window.location.href=newLocationString;// navigate('/Admin', { state: { message } })\n}else if(response.data.role=='USER'){var _newLocation=_objectSpread(_objectSpread({},location),{},{pathname:'/Home'});var _newLocationString=\"\".concat(_newLocation.pathname).concat(_newLocation.search).concat(_newLocation.hash);window.location.href=_newLocationString;// navigate('/Home', { state: { message } })\n}else navigate('/Home',{state:{message:message}}).catch(function(error){toast.error(\"Something went wrong, please try again...\");sessionStorage.setItem('IsUserLoggedIn',false);console.log(\"something went wrong\",error.response.data);});});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"lead\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"container col-4 mt-4 px-5 pb-5 shadow bg-body rounded\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"heading\",children:\"User Signin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setEmail(e.target.value);},type:\"email\",className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\"}),/*#__PURE__*/_jsx(\"div\",{id:\"emailHelp\",className:\"form-text\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setPassword(e.target.value);},type:\"password\",className:\"form-control\",id:\"exampleInputPassword1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"small\",{children:[\"Forgot password ?\",/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/forgotpass\",children:\"Click Here\"})})]}),\"\\u2003\\u2003\\u2003\",/*#__PURE__*/_jsx(\"h6\",{onClick:function onClick(){return resetPage();},className:\"btn btn-outline-secondary\",children:\"Reset\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:signinPerson,className:\" w-100 btn btn btn-outline-dark\",children:\"Signin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-label mt-2\",children:[\"Not yet registered?, \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Register Here\"})]})]})]})})]});};export default Signin;","map":{"version":3,"names":["useState","useNavigate","ToastContainer","toast","axios","Link","useLocation","BASE_URL","jsx","_jsx","jsxs","_jsxs","Signin","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","location","navigate","resetPage","signinPerson","length","warning","body","post","concat","then","response","window","sessionStorage","setItem","data","id","role","fullName","result","console","log","success","message","newLocation","_objectSpread","pathname","newLocationString","search","hash","href","state","catch","error","className","children","htmlFor","onChange","e","target","value","type","onClick","to"],"sources":["/home/sunbeam/FinalProject/CDAC_PGMANAGEMENT/Frontend/src/pages/Signin/Signin.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { ToastContainer ,toast } from \"react-toastify\";\r\nimport axios from \"axios\";\r\nimport \"./signin.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { BASE_URL } from \"../../url\";\r\n\r\nconst Signin = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const location=useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const resetPage=()=>{\r\n    setEmail('');\r\n    setPassword('');\r\n}\r\n\r\n  const signinPerson = () => {\r\n    if (email.length == 0)\r\n     {\r\n      toast.warning(\"please enter email\");\r\n     } else if (password.length == 0) \r\n     {\r\n      toast.warning(\"please enter password\");\r\n    }\r\n     else\r\n      {\r\n       const body = {\r\n        email,\r\n        password,\r\n       };\r\n\r\n           // make api call using axios\r\n      axios\r\n      .post(`${BASE_URL}/User/signin`, body)\r\n      .then((response) => {\r\n        window.sessionStorage.setItem(\"id\",response.data.id);\r\n        window.sessionStorage.setItem(\"role\",response.data.role);\r\n        window.sessionStorage.setItem(\"Name\",response.data.fullName);\r\n        // get the server result\r\n        const result = response.data;\r\n        console.log(result);\r\n\r\n        window.sessionStorage.setItem(\"isUserLoggedIn\" , true);\r\n       \r\n\r\n      \r\n          toast.success(\"Welcome to the PGManagement\");\r\n          const message = 'Welcome to PGHouse'\r\n          if (response.data.role == 'ADMIN') {\r\n            console.log(response.data.role);\r\n            \r\n            const newLocation = { ...location, pathname: '/Admin' };\r\n        const newLocationString = `${newLocation.pathname}${newLocation.search}${newLocation.hash}`;\r\n        window.location.href = newLocationString;\r\n\r\n\r\n            // navigate('/Admin', { state: { message } })\r\n          } else if (response.data.role == 'USER') {\r\n \r\n            const newLocation = { ...location, pathname: '/Home' };\r\n            const newLocationString = `${newLocation.pathname}${newLocation.search}${newLocation.hash}`;\r\n            window.location.href = newLocationString;\r\n            // navigate('/Home', { state: { message } })\r\n          } else \r\n          \r\n          navigate('/Home', { state: { message } })\r\n      .catch((error)=>{\r\n\r\n          toast.error(\"Something went wrong, please try again...\")\r\n        sessionStorage.setItem('IsUserLoggedIn',false);\r\n        console.log(\"something went wrong\", error.response.data)\r\n      })\r\n          \r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"lead\">\r\n      <br/><br/><br/><br/><br/><br/>\r\n      \r\n      <div className=\"container col-4 mt-4 px-5 pb-5 shadow bg-body rounded\">\r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"heading\">User Signin</div>\r\n          <div className=\"col\">\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                onChange={(e) => {\r\n                  setEmail(e.target.value);\r\n                }}\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputEmail1\"\r\n                aria-describedby=\"emailHelp\"\r\n              />\r\n              <div id=\"emailHelp\" className=\"form-text\">\r\n                We'll never share your email with anyone else.\r\n              </div>\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">\r\n                Password\r\n              </label>\r\n              <input\r\n                onChange={(e) => {\r\n                  setPassword(e.target.value);\r\n                }}\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                id=\"exampleInputPassword1\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <small >Forgot password ?<span><a href=\"/forgotpass\">Click Here</a></span></small>\r\n              &emsp;&emsp;&emsp;\r\n              <h6 onClick={()=>resetPage()} className='btn btn-outline-secondary' >Reset</h6>\r\n            </div>\r\n\r\n            <button\r\n              onClick={signinPerson}\r\n              className=\" w-100 btn btn btn-outline-dark\"\r\n            >\r\n              Signin\r\n            </button>\r\n            <div className=\"form-label mt-2\">\r\n              Not yet registered?, <Link to=\"/signup\">Register Here</Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Signin;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}